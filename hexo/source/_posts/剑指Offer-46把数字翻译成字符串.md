---
title: 面试题46. 把数字翻译成字符串
tags:
  - 剑指Offer
  - 动态规划
categories:
  - 剑指Offer
abbrlink: 13cdcb1b
---

> 给定一个数字，我们按照如下规则把它翻译为字符串：0 翻译成 “a” ，1 翻译成 “b”，……，11 翻译成 “l”，……，25 翻译成 “z”。一个数字可能有多个翻译。请编程实现一个函数，用来计算一个数字有多少种不同的翻译方法。
>
> 示例 1:
>
> ```
> 输入: 12258
> 输出: 5
> 解释: 12258有5种不同的翻译，分别是"bccfi", "bwfi", "bczi", "mcfi"和"mzi"
> ```

<!-- more -->

### 💡 思路

因为只有` 26` 个小写字母，即数字范围为` [0-25] `可以翻译为一个字母，因此一个数字的翻译方式最多有两种，一种是单独翻译成一个字母，第二种是和前一个数字组合翻译。而两个数字能够组合翻译的条件是其组成的数字范围在` [10-25]`之间，因为`01`、`02`是不合法的。举个例子：

- 如果只有一位数`1`，那么他只能有**壹**种翻译结果`b`；
- 如果有两位数`12`，除了各自单独翻译这一种方法之外，由于组合的数字`12`在`[10-25]`之间满足要求，可以组合翻译，翻译种数为`1+1=2`；
- 如果有三位数，如`121`，在两位数`12`的基础上，如果对第三位单独翻译，那么剩下的两位数`12`有**两**种不同的翻译；因为第二位`2`和第三位`1`组合得到`21∈{10, 25}`，因此他们可以组合翻译，那么剩下第一位`1`，它只有**壹**种翻译，所以三位数`121`总共有`2+1=3`种翻译；
- 如果有四位数`1212`，在三位数的基础上，如果对第四位单独翻译，那么剩下的三位数`121`有**叁**种翻译；因为第三位`1`和第四位`2`组合的数字`12∈{10, 25}`，可以组合翻译，那么剩下两位数`12`，它有**两**种翻译；于是对于四位数`1212`，共有`3+2=5`种翻译。

于是我们可以这样求解，从数字`num`的第一位（最高位）开始，遍历每一位，当前位的翻译种数至少和它前一位的种数相同（当前位单独翻译）；除此之外，如果当前位和前一位组成的数字在`[10-25]`之间，那么翻译种数需要再加上前两位的种数（当前位和前一位组合翻译）。

这样的过程不断在使用之前的结果来推导出新的结果，也就是**动态规划**的思想。

### 🧾 代码

为了方便地从数字的高位遍历到低位，我们先将数字转换成字符串。

```java
public int translateNum(int num) {
    String s = String.valueOf(num);
    int[] dp = new int[s.length()];
    dp[0] = 1;
    //动态规划，设dp[i]为前i个数字的翻译种数。对于i,两种情况：
    //1.自己翻译成一个字母,这样和上一位的种数是相同的;
    //2.如果和上一位组合的数字在10和25之间,可以组合翻译,这样种数就是前一位种数+前两位种数
    for(int i = 1; i < s.length(); i++){
        dp[i] = dp[i-1];
        if(s.charAt(i-1) == '1' || (s.charAt(i)<'6' && s.charAt(i-1)=='2')){
            dp[i] += i-2 < 0 ? 1 : dp[i-2]; 
        }
    }
    return dp[s.length()-1];
}
```

### 📈 优化

由于我们每次都只用到前一位和前两位的结果，因此可以对空间复杂度进行优化，这种优化方式称为滚动数组。仅仅使用两个变量保存结果。

这里还有一个优化是我们将当前位`i `的结果记录在`i+1`的位置上，这样就不需要每次都进行 `i-2 < 0`的检查。

```java
public int translateNum(int num) {
    String s = String.valueOf(num);
    int one = 1;//前一位种数
    int two = 1;//前两位种数
    int temp = 0;//中间变量-备份
    for(int i = 2; i <= s.length(); i ++){
        temp = one;//暂存前一位种数
        if(s.charAt(i-2) == '1' || (s.charAt(i-2) == '2' && s.charAt(i-1) < '6')){
            one += two;
        }
        two = temp;
    }
    return one;
}
```

