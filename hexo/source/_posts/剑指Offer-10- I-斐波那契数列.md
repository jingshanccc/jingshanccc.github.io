---
title: 面试题10- I. 斐波那契数列
tags:
  - 剑指Offer
  - 动态规划
  - 递归
  - 记忆化搜索
categories:
  - 剑指Offer
abbrlink: 18deca0d
---

> 写一个函数，输入 n ，求斐波那契数列的第 n 项。斐波那契数列定义如下：
>
> ```java
> F(0) = 0, F(1) = 1, F(N) = F(N-1)+F(N-2),N>1.
> ```
>
> 答案需要取模 1e9+7(1000000007)，如计算结果为1000000008，则返回1.

<!-- more -->

### 💡 思路

这道题最直接的思路就是通过递归来求解，它的递归过程和终止条件都已经给出。因此我们可以直接写出这样的代码。

```java
public int fib(int n) {
    if(n < 2){//递归终止条件
        return n;
    }
    return fib(n-1)%1000000007 + fib(n - 2)%1000000007;
}
```

### 📈 优化

但是简单的这样递归时间复杂度是O(ф^n)，ф是黄金分割比，是一个指数级别的时间复杂度。原因是这样的求解过程中出现了大量的重复计算。

![重复计算](https://gitee.com/jingshanccc/image/raw/master/image/20200722004614.jpg)

对数字n，求解fib(n-1)、**fib(n-2)**，之后对n-1，求解**f(n-2)**、**f(n-3)**，对n-2，求解**f(n-3)**、f(n-4)......因此我们可以通过先解决小问题，再求解大问题，先求解 1,2,3....直到n。这样就可以避免重复求解。

```java
public int fib(int n) {
    int a = 1, b = 0; //记录中间结果
    int sum = 0;
    for(int i = 2; i <= n; i++){
        sum = (a + b) % 1000000007;
        b = a;//往后移动
        a = sum;//往后移动
    }
    return sum;
}
```